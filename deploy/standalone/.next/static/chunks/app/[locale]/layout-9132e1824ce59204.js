(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[450],{13932:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var n=r(72311),l=r(62847);function s(){let[e,t]=(0,l.useState)(0);return(0,l.useEffect)(()=>{let e=()=>{let e=window.scrollY,r=document.documentElement.scrollHeight-window.innerHeight;t(Math.min(100*(r>0?e/r:0),100))};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,height:"4px",backgroundColor:"#3762e3",width:"".concat(e,"vw"),transition:"width 0.05s linear",zIndex:9999}})}},42404:(e,t,r)=>{"use strict";r.d(t,{default:()=>h});var n=r(72311),l=r(6252),s=r.n(l),a=r(89677),o=r(62847);function i(e){let{currentLocale:t}=e,r=(0,a.useRouter)(),l=(0,a.usePathname)(),[s,i]=(0,o.useState)(!1),c=["en","zh"],d=(0,o.useMemo)(()=>t&&"string"==typeof t&&c.includes(t)?t:"en",[t,c]);(0,o.useMemo)(()=>{try{return new Intl.DisplayNames([d],{type:"language"})}catch(e){return console.warn("Failed to create DisplayNames for locale:",d,e),new Intl.DisplayNames(["en"],{type:"language"})}},[d]);let u={en:"English",zh:"中文"},h=e=>{let t=new Date;t.setTime(t.getTime()+2592e6);let n=t.toUTCString();document.cookie="NEXT_LOCALE=".concat(e,";expires=").concat(n,";path=/");let s=l.split("/");s[1]=e;let a=s.join("/");r.push(a),i(!1)};return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("button",{onClick:()=>i(!s),className:"flex items-center space-x-2 px-3 py-2 rounded-md bg-white border border-gray-300 hover:bg-gray-50 transition-colors dark:bg-gray-800 dark:border-gray-600 dark:text-dark dark:hover:bg-gray-700 text-black",children:[(0,n.jsx)("span",{className:"text-xl",children:"\uD83C\uDF10"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:u[d]||d}),(0,n.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>i(!1)}),(0,n.jsx)("div",{className:"absolute right-0 mt-2 w-32 bg-white border border-gray-300 rounded-md shadow-lg z-50 dark:bg-gray-800 dark:border-gray-600",children:c.map(e=>(0,n.jsx)("button",{onClick:()=>h(e),className:"\n                  block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 transition-colors first:rounded-t-md last:rounded-b-md\n                  ".concat(e===d?"bg-blue-50 text-blue-700 font-medium dark:bg-blue-900 dark:text-blue-300":"text-gray-700 dark:text-gray-300 dark:hover:bg-gray-700","\n                "),disabled:e===d,children:u[e]},e))})]})]})}var c=r(82496),d=r(37348);function u(e){let{posts:t=[],onClose:r}=e,[l,a]=(0,o.useState)(""),i=(0,o.useRef)(null);console.log("传入的文章列表 posts:",t),(0,o.useEffect)(()=>{var e;null==(e=i.current)||e.focus()},[]);let u=(0,o.useRef)(null);(0,o.useEffect)(()=>{function e(e){u.current&&!u.current.contains(e.target)&&r()}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[r]);let h=(0,o.useMemo)(()=>{if(!l.trim())return t;let e=l.trim().toLowerCase();return t.filter(t=>t.title.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e)||t.content&&t.content.toLowerCase().includes(e)||t.tags&&t.tags.some(t=>t.toLowerCase().includes(e)))},[l,t]);return(0,n.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-start justify-center bg-black/40 backdrop-blur-sm",children:(0,n.jsxs)("div",{ref:u,className:"w-full max-w-2xl mt-8 sm:mt-24 mx-auto rounded-2xl bg-slate-900/90 backdrop-blur-lg shadow-2xl p-6 relative border border-slate-700 max-h-[90vh] flex flex-col",style:{minHeight:"300px"},children:[(0,n.jsx)("button",{className:"absolute top-4 right-4 text-slate-400 hover:text-white text-2xl",onClick:r,"aria-label":"关闭",children:(0,n.jsx)(c.yGN,{})}),(0,n.jsxs)("div",{className:"flex items-center mb-6 px-2",children:[(0,n.jsx)(c.CKj,{className:"text-slate-400 w-6 h-6 mr-2"}),(0,n.jsx)("input",{ref:i,value:l,onChange:e=>{a(e.target.value),console.log("当前搜索关键词:",e.target.value)},placeholder:"输入关键词搜索文章…",className:"flex-1 bg-transparent outline-none text-white placeholder-slate-400 text-lg",style:{minWidth:0}})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 pb-2",children:[0===h.length&&(0,n.jsx)("div",{className:"text-slate-400 text-center py-10",children:"没有找到相关内容"}),h.map(e=>(0,n.jsxs)(s(),{href:"/blog/".concat(e.slug),onClick:r,className:"block rounded-2xl overflow-hidden bg-slate-800/80 backdrop-blur-xl shadow-xl border border-slate-700/60 transition hover:scale-105 hover:shadow-2xl flex flex-col p-4",children:[(0,n.jsx)("div",{className:"relative h-36 w-full overflow-hidden rounded-lg mb-3",children:(0,n.jsx)(d.default,{src:e.cover||"/default-cover.jpg",alt:e.title,fill:!0,className:"object-cover w-full h-full",loading:"lazy"})}),(0,n.jsx)("div",{className:"font-bold text-white text-lg mb-1 line-clamp-2",children:e.title}),(0,n.jsxs)("div",{className:"text-xs text-slate-400 mb-1 flex flex-wrap gap-2",children:[e.tags&&(0,n.jsxs)("span",{children:["Tags: ",e.tags.join(", ")]}),(0,n.jsx)("span",{children:new Date(e.date).toLocaleDateString()}),e.readingTime&&(0,n.jsxs)("span",{children:["\xb7 ",e.readingTime," 分钟"]})]}),(0,n.jsx)("div",{className:"text-slate-300 text-sm line-clamp-3",children:e.description})]},e.slug))]})]})})}function h(e){let{locale:t,posts:r}=e,l=(0,a.usePathname)(),[d,h]=(0,o.useState)(!1),[m,x]=(0,o.useState)(!1),f=[{key:"blog",href:"/".concat(t,"/blog"),label:"zh"===t?"博客":"Blog"},{key:"search",href:"/".concat(t,"/search"),label:"zh"===t?"工具":"Search"},{key:"album",href:"/".concat(t,"/album"),label:"zh"===t?"摄影":"Album"},{key:"milestone",href:"/".concat(t,"/milestone"),label:"zh"===t?"里程碑":"Milestone"},{key:"about",href:"/".concat(t,"/about"),label:"zh"===t?"关于我":"About"}],b=e=>l.startsWith(e),[p,v]=(0,o.useState)(!1),[g,w]=(0,o.useState)(0);return((0,o.useEffect)(()=>{v(!0);let e=()=>{w(Math.min(window.scrollY/60,1))};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,o.useEffect)(()=>{if(!m)return;let e=e=>{"Escape"===e.key&&x(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m]),p)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("header",{className:"fixed top-0 left-0 w-full h-16 text-white transition-colors duration-300 z-50",style:{backgroundColor:"rgba(32, 41, 58, ".concat(g,")")},children:(0,n.jsxs)("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,n.jsx)(s(),{href:"/".concat(t),className:"flex items-center space-x-2 text-xl font-bold text-white",children:(0,n.jsx)("span",{children:"zh"===t?"车车":"Thomas Che Blog"})}),(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)("div",{className:"ml-10 flex items-baseline space-x-8",children:f.map(e=>(0,n.jsx)(s(),{href:e.href,className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors text-white ".concat(b(e.href)?"border-b-2 border-white":""),children:(0,n.jsx)("span",{children:e.label})},e.key))})}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(i,{currentLocale:t}),(0,n.jsx)("button",{className:"p-2 rounded-full hover:bg-slate-700 transition",onClick:()=>x(!0),"aria-label":"搜索",children:(0,n.jsx)(c.CKj,{className:"w-6 h-6"})}),(0,n.jsxs)("button",{className:"md:hidden inline-flex items-center justify-center p-2 rounded-md text-white hover:text-white",onClick:()=>h(!d),children:[(0,n.jsx)("span",{className:"sr-only",children:"打开主菜单"}),d?(0,n.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,n.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})]})]}),d&&(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsx)("div",{className:"px-2 pt-2 pb-3 space-y-1 bg-white border-t border-gray-200",children:f.map(e=>(0,n.jsx)(s(),{href:e.href,onClick:()=>h(!1),className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(b(e.href)?"bg-blue-100 text-blue-700":"text-gray-700 hover:text-blue-900 hover:bg-gray-100"),children:(0,n.jsx)("span",{children:e.label})},e.key))})})]})}),m&&(0,n.jsx)(u,{posts:r,onClose:()=>x(!1)})]}):null}},54634:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var n=r(62847),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=n.createContext&&n.createContext(l),a=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n,l,s;n=e,l=t,s=r[t],(l=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(l))in n?Object.defineProperty(n,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[l]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>n.createElement(u,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:l,size:s,title:i}=e,d=function(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,a),u=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&n.createElement("title",null,i),e.children)};return void 0!==s?n.createElement(s.Consumer,null,e=>t(e)):t(l)}},59289:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var n=r(26590),l=r(72311);function s(e){let{locale:t,...r}=e;if(!t)throw Error(void 0);return(0,l.jsx)(n.Dk,{locale:t,...r})}},68430:(e,t,r)=>{Promise.resolve().then(r.bind(r,59289)),Promise.resolve().then(r.bind(r,88260)),Promise.resolve().then(r.bind(r,42404)),Promise.resolve().then(r.bind(r,13932))},88260:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var n=r(72311),l=r(62847);function s(e){let{children:t}=e,[r,s]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=()=>s(window.scrollY>60);return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,n.jsx)("div",{className:"flex-grow ".concat(r?"inset-0 bg-black/40 backdrop-blur-md":""),children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[215,893,252,873,789,20,358],()=>t(68430)),_N_E=e.O()}]);