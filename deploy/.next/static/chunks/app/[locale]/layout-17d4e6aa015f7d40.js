(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[450],{1476:(e,t,r)=>{Promise.resolve().then(r.bind(r,8260)),Promise.resolve().then(r.bind(r,2404)),Promise.resolve().then(r.bind(r,3932))},1547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return i},getImageProps:function(){return o}});let n=r(8115),s=r(1229),l=r(4893),a=n._(r(5463));function o(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let i=l.Image},2404:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var n=r(2311),s=r(6252),l=r.n(s),a=r(9677),o=r(2847);function i(e){let{currentLocale:t}=e,r=(0,a.useRouter)(),s=(0,a.usePathname)(),[l,i]=(0,o.useState)(!1),c=["en","zh"],d=(0,o.useMemo)(()=>t&&"string"==typeof t&&c.includes(t)?t:"en",[t,c]);(0,o.useMemo)(()=>{try{return new Intl.DisplayNames([d],{type:"language"})}catch(e){return console.warn("Failed to create DisplayNames for locale:",d,e),new Intl.DisplayNames(["en"],{type:"language"})}},[d]);let u={en:"English",zh:"中文"},m=e=>{let t=new Date;t.setTime(t.getTime()+2592e6);let n=t.toUTCString();document.cookie="NEXT_LOCALE=".concat(e,";expires=").concat(n,";path=/");let l=s.split("/");l[1]=e;let a=l.join("/");r.push(a),i(!1)};return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("button",{onClick:()=>i(!l),className:"flex items-center space-x-2 px-3 py-2 rounded-md bg-white border border-gray-300 hover:bg-gray-50 transition-colors dark:bg-gray-800 dark:border-gray-600 dark:text-white dark:hover:bg-gray-700",children:[(0,n.jsx)("span",{className:"text-xl",children:"\uD83C\uDF10"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:u[d]||d}),(0,n.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(l?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>i(!1)}),(0,n.jsx)("div",{className:"absolute right-0 mt-2 w-32 bg-white border border-gray-300 rounded-md shadow-lg z-50 dark:bg-gray-800 dark:border-gray-600",children:c.map(e=>(0,n.jsx)("button",{onClick:()=>m(e),className:"\n                  block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 transition-colors first:rounded-t-md last:rounded-b-md\n                  ".concat(e===d?"bg-blue-50 text-blue-700 font-medium dark:bg-blue-900 dark:text-blue-300":"text-gray-700 dark:text-gray-300 dark:hover:bg-gray-700","\n                "),disabled:e===d,children:u[e]},e))})]})]})}var c=r(2496),d=r(7348);function u(e){let{posts:t=[],onClose:r}=e,[s,a]=(0,o.useState)(""),i=(0,o.useRef)(null);console.log("传入的文章列表 posts:",t),(0,o.useEffect)(()=>{var e;null==(e=i.current)||e.focus()},[]);let u=(0,o.useRef)(null);(0,o.useEffect)(()=>{function e(e){u.current&&!u.current.contains(e.target)&&r()}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[r]);let m=(0,o.useMemo)(()=>{if(!s.trim())return t;let e=s.trim().toLowerCase();return t.filter(t=>t.title.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e)||t.content&&t.content.toLowerCase().includes(e)||t.tags&&t.tags.some(t=>t.toLowerCase().includes(e)))},[s,t]);return(0,n.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-start justify-center bg-black/40 backdrop-blur-sm",children:(0,n.jsxs)("div",{ref:u,className:"w-full max-w-2xl mt-8 sm:mt-24 mx-auto rounded-2xl bg-slate-900/90 backdrop-blur-lg shadow-2xl p-6 relative border border-slate-700 max-h-[90vh] flex flex-col",style:{minHeight:"300px"},children:[(0,n.jsx)("button",{className:"absolute top-4 right-4 text-slate-400 hover:text-white text-2xl",onClick:r,"aria-label":"关闭",children:(0,n.jsx)(c.yGN,{})}),(0,n.jsxs)("div",{className:"flex items-center mb-6 px-2",children:[(0,n.jsx)(c.CKj,{className:"text-slate-400 w-6 h-6 mr-2"}),(0,n.jsx)("input",{ref:i,value:s,onChange:e=>{a(e.target.value),console.log("当前搜索关键词:",e.target.value)},placeholder:"输入关键词搜索文章…",className:"flex-1 bg-transparent outline-none text-white placeholder-slate-400 text-lg",style:{minWidth:0}})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 pb-2",children:[0===m.length&&(0,n.jsx)("div",{className:"text-slate-400 text-center py-10",children:"没有找到相关内容"}),m.map(e=>(0,n.jsxs)(l(),{href:"/blog/".concat(e.slug),onClick:r,className:"block rounded-2xl overflow-hidden bg-slate-800/80 backdrop-blur-xl shadow-xl border border-slate-700/60 transition hover:scale-105 hover:shadow-2xl flex flex-col p-4",children:[(0,n.jsx)("div",{className:"relative h-36 w-full overflow-hidden rounded-lg mb-3",children:(0,n.jsx)(d.default,{src:e.cover||"/default-cover.jpg",alt:e.title,className:"object-cover w-full h-full",loading:"lazy"})}),(0,n.jsx)("div",{className:"font-bold text-white text-lg mb-1 line-clamp-2",children:e.title}),(0,n.jsxs)("div",{className:"text-xs text-slate-400 mb-1 flex flex-wrap gap-2",children:[e.tags&&(0,n.jsxs)("span",{children:["Tags: ",e.tags.join(", ")]}),(0,n.jsx)("span",{children:new Date(e.date).toLocaleDateString()}),e.readingTime&&(0,n.jsxs)("span",{children:["\xb7 ",e.readingTime," 分钟"]})]}),(0,n.jsx)("div",{className:"text-slate-300 text-sm line-clamp-3",children:e.description})]},e.slug))]})]})})}function m(e){let{locale:t,posts:r}=e,s=(0,a.usePathname)(),[d,m]=(0,o.useState)(!1),[h,x]=(0,o.useState)(!1),f=[{key:"blog",href:"/".concat(t,"/blog"),label:"zh"===t?"博客":"Blog"},{key:"search",href:"/".concat(t,"/search"),label:"zh"===t?"工具":"Search"},{key:"milestone",href:"/".concat(t,"/milestone"),label:"zh"===t?"里程碑":"Milestone"},{key:"about",href:"/".concat(t,"/about"),label:"zh"===t?"关于我":"About"}],b=e=>s.startsWith(e),[p,g]=(0,o.useState)(!1),[v,w]=(0,o.useState)(0);return((0,o.useEffect)(()=>{g(!0);let e=()=>{w(Math.min(window.scrollY/120,1))};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,o.useEffect)(()=>{if(!h)return;let e=e=>{"Escape"===e.key&&x(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[h]),p)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("header",{className:"fixed top-0 left-0 w-full h-16 text-white transition-colors duration-300 z-50",style:{backgroundColor:"rgba(32, 41, 58, ".concat(v,")")},children:(0,n.jsxs)("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,n.jsx)(l(),{href:"/".concat(t),className:"flex items-center space-x-2 text-xl font-bold text-white",children:(0,n.jsx)("span",{children:"zh"===t?"车车":"Thomas Che Blog"})}),(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)("div",{className:"ml-10 flex items-baseline space-x-8",children:f.map(e=>(0,n.jsx)(l(),{href:e.href,className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors text-white ".concat(b(e.href)?"border-b-2 border-white":""),children:(0,n.jsx)("span",{children:e.label})},e.key))})}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(i,{currentLocale:t}),(0,n.jsx)("button",{className:"p-2 rounded-full hover:bg-slate-700 transition",onClick:()=>x(!0),"aria-label":"搜索",children:(0,n.jsx)(c.CKj,{className:"w-6 h-6"})}),(0,n.jsxs)("button",{className:"md:hidden inline-flex items-center justify-center p-2 rounded-md text-white hover:text-white",onClick:()=>m(!d),children:[(0,n.jsx)("span",{className:"sr-only",children:"打开主菜单"}),d?(0,n.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,n.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})]})]}),d&&(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsx)("div",{className:"px-2 pt-2 pb-3 space-y-1 bg-white border-t border-gray-200",children:f.map(e=>(0,n.jsx)(l(),{href:e.href,onClick:()=>m(!1),className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(b(e.href)?"bg-blue-100 text-blue-700":"text-gray-700 hover:text-blue-900 hover:bg-gray-100"),children:(0,n.jsx)("span",{children:e.label})},e.key))})})]})}),h&&(0,n.jsx)(u,{posts:r,onClose:()=>x(!1)})]}):null}},3932:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(2311),s=r(2847);function l(){let[e,t]=(0,s.useState)(0);return(0,s.useEffect)(()=>{let e=()=>{let e=window.scrollY,r=document.documentElement.scrollHeight-window.innerHeight;t(Math.min(100*(r>0?e/r:0),100))};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,height:"4px",backgroundColor:"#3762e3",width:"".concat(e,"vw"),transition:"width 0.05s linear",zIndex:9999}})}},4634:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var n=r(2847),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=n.createContext&&n.createContext(s),a=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n,s,l;n=e,s=t,l=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in n?Object.defineProperty(n,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[s]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>n.createElement(u,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:s,size:l,title:i}=e,d=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,a),u=l||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&n.createElement("title",null,i),e.children)};return void 0!==l?n.createElement(l.Consumer,null,e=>t(e)):t(s)}},7348:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var n=r(1547),s=r.n(n)},8260:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(2311),s=r(2847);function l(e){let{children:t}=e,[r,l]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=()=>l(window.scrollY>60);return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,n.jsx)("div",{className:"flex-grow ".concat(r?"inset-0 bg-black/40 backdrop-blur-md":""),children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[215,893,252,789,20,358],()=>t(1476)),_N_E=e.O()}]);